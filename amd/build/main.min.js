define(["jquery","core/ajax","core/notification","core/str","core/url","core/modal_factory","core/modal_events"],function(g,d,e,f,c,b,h){return{relation_load:function(j,i,k){console.log("block_edureportbook/relation_load(uniqid, courseid, studentid)",j,i,k);if(typeof(k)=="undefined"){return}g("#students-"+j+" .name-label, #legalguardians-"+j+" .name-label").removeClass("selected");g("#student-"+j+"-"+k).addClass("selected");g("#legalguardians-"+j+" .name-label").removeClass("pending");d.call([{methodname:"block_edureportbook_relations",args:{courseid:i,studentid:k},done:function(l){l=l.split(",");console.log("Got result",l);if(g("#student-"+j+"-"+k).hasClass("selected")){for(a=0;a<l.length;a++){g("#legalguardian-"+j+"-"+l[a]).addClass("selected")}}},fail:e.exception}])},relation_set:function(k,i,j){console.log("block_edureportbook/relation_set(uniqid, courseid, parentid)",k,i,j);if(g("#students-"+k+" .name-label.selected").length==0){return}var m=g("#students-"+k+" .name-label.selected").attr("data-id");g("#legalguardian-"+k+"-"+j).addClass("pending");var l=g("#legalguardian-"+k+"-"+j).hasClass("selected")?0:1;d.call([{methodname:"block_edureportbook_relation",args:{courseid:i,studentid:m,parentid:j,to:l},done:function(n){console.log("Got result",n);if(g("#student-"+k+"-"+m).hasClass("selected")){g("#legalguardian-"+k+"-"+j).removeClass("pending");if(n==1){g("#legalguardian-"+k+"-"+j).addClass("selected")}else{g("#legalguardian-"+k+"-"+j).removeClass("selected")}if(g("#legalguardians-"+k+" .name-label.selected").length>0){g("#student-"+k+"-"+m).addClass("relationisset")}else{g("#student-"+k+"-"+m).removeClass("relationisset")}}},fail:e.exception}])},}});